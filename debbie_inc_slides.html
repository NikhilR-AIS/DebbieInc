<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debbie Inc ‚Äì Spend Intelligence System Flow</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px;
            overflow-x: auto;
        }
        
        .slide {
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            max-width: 1400px;
            margin: 0 auto;
            padding: 50px;
        }
        
        .title {
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #7f8c8d;
            margin-bottom: 50px;
            font-weight: 300;
        }
        
        .diagram-container {
            position: relative;
            min-height: 600px;
            padding: 20px;
        }
        
        .flow-box {
            position: absolute;
            padding: 20px;
            border-radius: 8px;
            min-width: 200px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .flow-box:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 12px rgba(0,0,0,0.2);
        }
        
        .box-label {
            font-weight: 700;
            font-size: 1.1rem;
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .box-description {
            font-size: 0.9rem;
            color: #5a6c7d;
            line-height: 1.4;
        }
        
        /* Color schemes */
        .orange { background: linear-gradient(135deg, #FFA07A, #FFE5CC); border-left: 4px solid #FF8C69; }
        .blue { background: linear-gradient(135deg, #87CEEB, #E0F6FF); border-left: 4px solid #4682B4; }
        .yellow { background: linear-gradient(135deg, #FFD700, #FFFACD); border-left: 4px solid #FFB84D; }
        .medium-blue { background: linear-gradient(135deg, #4169E1, #B0C4DE); border-left: 4px solid #191970; }
        .dark-blue { background: linear-gradient(135deg, #2c3e50, #34495e); border-left: 4px solid #1a252f; color: white; }
        .light-blue { background: linear-gradient(135deg, #ADD8E6, #E6F3FF); border-left: 4px solid #5CB3FF; }
        .grey { background: linear-gradient(135deg, #E8E8E8, #F5F5F5); border-left: 4px solid #A9A9A9; }
        .dashed { border: 2px dashed #999; background: white; }
        
        /* Cylinder shape for database */
        .cylinder {
            position: relative;
        }
        
        .cylinder::before {
            content: '';
            position: absolute;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 50px solid transparent;
            border-right: 50px solid transparent;
            border-bottom: 30px solid #FFD700;
        }
        
        .cylinder::after {
            content: '';
            position: absolute;
            bottom: -30px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 50px solid transparent;
            border-right: 50px solid transparent;
            border-top: 30px solid #FFD700;
        }
        
        /* SVG Arrows */
        svg {
            position: absolute;
            pointer-events: none;
        }
        
        .arrow {
            fill: #2c3e50;
            stroke: #2c3e50;
        }
        
        .dashed-arrow {
            fill: #999;
            stroke: #999;
            stroke-dasharray: 5,5;
        }
        
        /* Positions for boxes */
        .data-sources { top: 50px; left: 50px; }
        .ingest { top: 50px; left: 300px; }
        .database { top: 200px; left: 560px; }
        .sql-gen { top: 200px; left: 820px; }
        .db-exec { top: 350px; left: 820px; }
        .analyst { top: 350px; left: 1080px; }
        .chat { top: 200px; left: 1340px; }
        .memory { top: 50px; left: 1100px; width: 250px; }
        
        /* Arrow paths - simplified for visibility */
        .arrow-1 { top: 100px; left: 250px; }
        .arrow-2 { top: 250px; left: 300px; }
        .arrow-3 { top: 250px; left: 1020px; }
        .arrow-4 { top: 400px; left: 1020px; }
        .arrow-5 { top: 250px; left: 1240px; }
        .arrow-6 { top: 250px; left: 1280px; }
        .arrow-7 { top: 250px; left: 920px; }
        
        .footer {
            margin-top: 50px;
            text-align: center;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        .flow-description {
            margin-top: 30px;
            background: #f8f9fa;
            padding: 30px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        
        .flow-description h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .flow-description p {
            color: #5a6c7d;
            line-height: 1.8;
            font-size: 1rem;
        }
        
        @media (max-width: 1400px) {
            .slide {
                padding: 30px;
            }
            .title {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="slide">
        <h1 class="title">Debbie Inc ‚Äì Spend Intelligence System Flow</h1>
        <p class="subtitle">Vendor-Agnostic Architecture</p>
        
        <div class="diagram-container">
            <!-- Data Flow Boxes -->
            <div class="flow-box orange data-sources">
                <div class="box-label">üìä Data Sources</div>
                <div class="box-description">Incoming transaction feeds (webhooks, batch files, historical backfills)</div>
            </div>
            
            <div class="flow-box light-blue ingest">
                <div class="box-label">üîÑ Ingest & Normalize</div>
                <div class="box-description">Deduplicate, validate, normalize categories, merchant names, signs (expenses negative, income positive)</div>
            </div>
            
            <div class="flow-box yellow cylinder database">
                <div class="box-label">üóÑÔ∏è Transactions Database</div>
                <div class="box-description">Postgres ‚Äì 'transactions' table<br>Stores normalized transaction records</div>
            </div>
            
            <div class="flow-box medium-blue sql-gen">
                <div class="box-label">ü§ñ SQL Generator (LLM)</div>
                <div class="box-description">Turns natural-language questions into safe SQL queries</div>
            </div>
            
            <div class="flow-box light-blue db-exec">
                <div class="box-label">‚öôÔ∏è DB Executor</div>
                <div class="box-description">Runs SQL read-only and returns result rows</div>
            </div>
            
            <div class="flow-box medium-blue analyst">
                <div class="box-label">üß† Analyst (LLM)</div>
                <div class="box-description">Explains results conversationally and gives insights (no charts)</div>
            </div>
            
            <div class="flow-box dark-blue chat">
                <div class="box-label">üí¨ Chat Interface</div>
                <div class="box-description" style="color: white;">User interacts here; receives human explanations</div>
            </div>
            
            <div class="flow-box grey dashed memory">
                <div class="box-label">üí≠ Conversation Memory</div>
                <div class="box-description">Stores last SQL, result rows, and preferences ('no charts') to enable follow-ups like 'analyze that'</div>
            </div>
            
            <!-- Arrows SVG -->
            <svg width="1400" height="600" style="position: absolute; top: 0; left: 0;">
                <!-- Data Sources ‚Üí Ingest -->
                <defs>
                    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#2c3e50" />
                    </marker>
                    <marker id="arrowhead-dashed" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
                        <polygon points="0 0, 10 3, 0 6" fill="#999" />
                    </marker>
                </defs>
                
                <!-- Ingest ‚Üí Database -->
                <line x1="450" y1="100" x2="560" y2="250" stroke="#2c3e50" stroke-width="3" marker-end="url(#arrowhead)" />
                
                <!-- Database ‚Üí SQL Generator -->
                <line x1="800" y1="250" x2="820" y2="275" stroke="#2c3e50" stroke-width="3" marker-end="url(#arrowhead)" />
                
                <!-- SQL Generator ‚Üí DB Executor -->
                <line x1="920" y1="400" x2="920" y2="350" stroke="#2c3e50" stroke-width="3" marker-end="url(#arrowhead)" />
                
                <!-- DB Executor ‚Üí Analyst -->
                <line x1="1020" y1="425" x2="1080" y2="400" stroke="#2c3e50" stroke-width="3" marker-end="url(#arrowhead)" />
                
                <!-- Analyst ‚Üí Chat -->
                <line x1="1280" y1="400" x2="1340" y2="275" stroke="#2c3e50" stroke-width="3" marker-end="url(#arrowhead)" />
                
                <!-- Memory ‚Üí SQL Generator (dashed) -->
                <path d="M 1220 100 Q 1000 200 900 200" stroke="#999" stroke-width="2" fill="none" marker-end="url(#arrowhead-dashed)" stroke-dasharray="5,5" />
                
                <!-- Memory ‚Üí Analyst (dashed) -->
                <path d="M 1340 150 Q 1250 300 1200 300" stroke="#999" stroke-width="2" fill="none" marker-end="url(#arrowhead-dashed)" stroke-dasharray="5,5" />
                
                <!-- DB Executor ‚Üí Memory -->
                <path d="M 1020 450 Q 1050 300 1220 200" stroke="#999" stroke-width="2" fill="none" marker-end="url(#arrowhead-dashed)" stroke-dasharray="5,5" />
                
                <!-- Analyst ‚Üí Memory -->
                <path d="M 1200 400 Q 1250 300 1300 200" stroke="#999" stroke-width="2" fill="none" marker-end="url(#arrowhead-dashed)" stroke-dasharray="5,5" />
            </svg>
        </div>
        
        <div class="flow-description">
            <h3>üéØ How It Works</h3>
            <p><strong>Data Flow:</strong> Transaction data enters from various sources (webhooks, batch files) and gets normalized through the ingestion layer. The cleaned data is stored in a PostgreSQL database, ready for queries.</p>
            <br>
            <p><strong>AI-Powered Analysis:</strong> When a user asks a question, the SQL Generator (LLM) converts it into a safe SQL query. The DB Executor runs this query read-only against the transactions database and returns the results. The Analyst (LLM) then interprets these results and provides conversational insights without generating charts.</p>
            <br>
            <p><strong>Memory & Context:</strong> The Conversation Memory module stores recent queries, results, and user preferences to enable follow-up questions like "analyze that" or "go deeper" by maintaining context across the conversation.</p>
        </div>
        
        <div class="footer">
            Debbie Inc ‚Äì Spend Intelligence Platform | Vendor-Agnostic Architecture
        </div>
    </div>
</body>
</html>

